<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta http-equiv="Content-Security-Policy"  content="default-src *; 
                      style-src * 'self' 'unsafe-inline' 'unsafe-eval'; 
                      script-src * 'self' 'unsafe-inline' 'unsafe-eval';">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!-- <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> -->

    <style>
    	html, body{width:100vw; height:100vh; background-color: #fff; margin:0; padding:0;}
		#blanker{background-image:url('loader.gif'); background-repeat:no-repeat; background-size: 150px; background-position: center center; display:block; z-index:9998; position:fixed; top:0;left:0; height:100%; width:100%; background-color:#f4f5f6;}
		#offline-screen{width:100%; height:100%; background:url('offline.png') no-repeat center center; background-color: #fff; background-size: 70px; display:none; z-index:9999; position:fixed; top:0; left:0;}
	</style>
	<script src="cordova.js" type="text/javascript"></script>
	<script type="text/javascript">
		function onLoad(){
			document.addEventListener('deviceready', this.onDeviceReady, false);
		}

		function doWhenOffline(){		
			alert("Offline");
			document.getElementById('offline-screen').style.display = 'block';
			document.getElementById('iframe').style.visibility = 'hidden';
		}

		function doWhenOnline(){
		alert("Online");		
			document.getElementById('offline-screen').style.display = 'none';
			document.getElementById('iframe').style.visibility = 'visible';
			//document.getElementById('iframe').src = 'http://angularapp.dev.projects.nickosys.com'
		}

		function onDeviceReady() {
			document.getElementById('blanker').style.display = 'none';
			document.addEventListener("offline", doWhenOffline, false);
			document.addEventListener("online", doWhenOnline, false);
		}

		var networkState = navigator.connection.type;
		if(networkState == Connection.NONE) {
			doWhenOffline();
		}
		else{
			doWhenOnline();
		}
	</script>

</head>
<body id="app">
	

	<iframe onload="onLoad();" id="iframe" src="http://www.nickosys.com" name="container-frame" id="container-frame"  seamless="seamless" width="100%" height="100%" style="border:none; position:absolute;"></iframe>
	<div id="blanker"></div>
	<div id="offline-screen"></div>
	
	<script type="text/javascript">
		// function onLoad(){
		// 	document.addEventListener('deviceready', this.onDeviceReady, false);
		// }

		// function doWhenOffline(){
		// 	alert("Offline");			
		// 	// document.getElementById('offline-screen').style.display = 'block';
		// 	// document.getElementById('iframe').style.display = 'none';
		// }

		// function onDeviceReady() {
		// 	document.addEventListener("offline", doWhenOffline, false);
		// }

		// var app = {
		//     // Application Constructor
		//     initialize: function() {
		//         this.bindEvents();
		//     },
		//     // Bind Event Listeners
		//     //
		//     // Bind any events that are required on startup. Common events are:
		//     // 'load', 'deviceready', 'offline', and 'online'.
		//     bindEvents: function() {
		//         document.addEventListener('deviceready', this.onDeviceReady, false);
		//     }
		// }
		// app.initialize();

		// function loaded(){
		// 	alert("Iframe Loaded");
		// 	document.getElementById('blanker').style.display = 'none';
		// 	document.getElementById('iframe').style.display = 'block';
		// 	document.addEventListener("deviceready",onDeviceReady,false);
		// }

		// function doWhenOnline(){
		// 	alert("Online");
		// 	document.getElementById('offline-screen').style.display = 'none';
		// 	document.getElementById('iframe').style.display = 'block';
		// }

		// function doWhenOffline(){
		// 	alert("Offline");			
		// 	document.getElementById('offline-screen').style.display = 'block';
		// 	document.getElementById('iframe').style.display = 'none';
		// }

		// function onDeviceReady(){
		// 	alert("Ready");
		// 	StatusBar.hide();
		// 	document.addEventListener("online", doWhenOnline, false);
		// 	document.addEventListener("offline", doWhenOffline, false);

		// 	var networkState = navigator.connection.type;
		// 	if(networkState == Connection.NONE) {
		// 		doWhenOffline();
		// 	}
		// 	else{
		// 		doWhenOnline();
		// 	}
		// }

		//document.getElementById('offline-screen').style.height = document.body.clientHeight+'px';
		
	</script>
</body>
</html>